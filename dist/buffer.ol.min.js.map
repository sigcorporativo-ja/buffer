{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/buffer.html","webpack:///./src/facade/js/vanilla-picker.js","webpack:///./src/impl/ol/js/buffercontrolImpl.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/facade/js/buffercontrol.js","webpack:///./src/impl/ol/js/bufferLayerImpl.js","webpack:///./src/facade/js/bufferLayer.js","webpack:///./src/facade/js/buffer.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","factory","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","slicedToArray","arr","Array","isArray","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","sliceIterator","String","startsWith","needle","this","indexOf","padStart","len","pad","str","colorNames","cb","tqw","q","qmrn","zr","bg","bsq","bck","nch","b","bvt","brwn","brw","ctb","hrt","chcT","cr","rnw","crns","crms","cn","Db","Dcn","Dgnr","Dgr","Dgrn","Dkhk","Dmgn","Dvgr","Drng","Drch","Dr","Dsmn","Dsgr","DsTb","DsTg","Dtrq","Dvt","ppnk","pskb","mgr","grb","rbrc","rwht","stg","chs","gnsb","st","g","gnr","gr","grn","grnw","hnw","htpn","nnr","ng","vr","khk","vnr","nrb","wngr","mnch","Lb","Lcr","Lcn","Lgnr","Lgr","Lgrn","Lpnk","Lsmn","Lsgr","Lskb","LsTg","Lstb","Lw","mgrn","nn","mgnt","mrn","mqm","mmb","mmrc","mmpr","msg","mmsT","mtr","mmvt","mnLb","ntc","mstr","mccs","vjw","nv","v","vrb","rng","rngr","rch","pgnr","pgrn","ptrq","pvtr","ppwh","pchp","pr","pnk","pm","pwrb","prp","cc","sbr","rb","sbrw","smn","nbr","sgrn","ssh","snn","svr","skb","sTb","sTgr","snw","stb","tn","thst","tmT","trqs","vt","whT","wht","hts","w","wgrn","printNum","num","decs","arguments","toFixed","replace","toString","Color","a","that","rgba","color","input","_input$match$map","match","map","Number","_input$match$map2","h","_a","hsla","_input$match$map3","_input$match$map4","_r","_g","_b","_a2","hexToRgb","nameToRgb","parseString","toLowerCase","alpha","vals","slice","x","mults","suff","hex","substring","_rgba","_hsla","Error","hslToRgb","set","rgb","printRGB","rgbToHsl","hsl","printHSL","Math","round","join","parseInt","hash","_ref","_ref2","max","min","_ref3","_ref4","hue2rgb","EventBucket","_events","type","handler","addEventListener","filter","e","isMatch","_doRemove","forEach","removeEventListener","dragTrack","eventBucket","area","callback","dragging","clamp","val","onMove","info","starting","preventDefault","bounds","getBoundingClientRect","width","height","clientX","y","clientY","relX","left","relY","top","onMouse","buttons","which","onTouch","touches","add","window","$","selector","context","document","querySelector","stopEvent","stopPropagation","onKey","bucket","keys","stop","_style","createElement","textContent","documentElement","firstElementChild","appendChild","Picker","options","settings","popup","layout","editor","editorFormat","cancelButton","defaultColor","onChange","onDone","onOpen","onClose","setOptions","_this","HTMLElement","parent","remove","_popupInited","source","skipKeys","transfer","col","colour","_setColor","openProxy","openHandler","show","style","pointerEvents","toFocus","_domEdit","domElement","setTimeout","focus","event","doHide","knownTime","__containedEvent","timeStamp","hide","open","closeHandler","silent","flags","trim","ex","failSilently","_setHSLA","setColor","toggled","_toggleDOM","_setPosition","htmlString","div","html","template","wrapper","innerHTML","_domH","_domSL","_domA","_domSample","_domOkay","_domCancel","classList","_ifPopup","_updateUI","_bindEvents","destroy","removeChild","_this2","dom","events","addEvent","editInput","fromEditor","selectionStart","selectionEnd","select","popupCloseProxy","timeKeeper","onDoneProxy","elm","parentNode","getComputedStyle","position","cssClass","cssHue","cssHSL","hslString","cssHSLA","hslaString","uiH","uiSL","uiA","thumbH","thumbSL","thumbA","posX","backgroundColor","posY","opaque","transp","backgroundImage","format","printHex","child","actionIf","actionElse","toVisible","displayStyle","toggle","display","define","BufferControl","M","impl","Control","getMapImpl","getInteractions","interaction","ol","DoubleClickZoom","dblClickInteraction_","setActive","on","evt","customEvt","CustomEvent","detail","coordinate","bubbles","getContainer","dispatchEvent","Draw","Modify","olFeature","features","olLayer","getSource","deleteCondition","condition","shiftKeyOnly","singleClick","facadeMap_","removeInteraction","setStyle","createStyle","Style","fill","Fill","stroke","Stroke","image","Circle","radius","translations","en","es","getLang","res","language","getTranslation","lang","getValue","keyPath","translation","utils","isNullOrEmpty","console","warn","split","reduce","prev","current","editLayer","featuresEdit","BufferControlImpl","isUndefined","exception","Promise","success","fail","compileSync","vars","tooltip_point","tooltip_line","tooltip_polygon","tooltip_remove","template_","manageDraw_","removeFeatures","isTheSame","getAttribute","manageActivatedDeactivated","manageInteraction_","originFeature","draw","createNewDrawInteraction","originDraw","colorFeature","feature","dialog","minWidth","colorPickBtn","colorPicker","background","rgbaString","rgbString","btn","inputBuffer","distance","unit","unitBufferM","unitBufferKm","ev","addBuffer_","addInteraction","concat","getArray","isInteractionInstanceOfDrawOrModify","parser","jsts","io","OL3Parser","buffered","read","getGeometry","buffer","setGeometry","write","flag","elements","querySelectorAll","clear","control","BufferLayerImpl","Layer","layerOL","addLayer","olMap","removeLayer","BufferLayer","layer","GeoJSON","obj","equals","Buffer","Plugin","map_","controls_","position_","collapsed_","collapsed","collapsible_","collapsible","metadata_","api","metadata","Collection","featureOverlay","Vector","setMap","layerAux","hasLayerBuffer_","bufferLayer","addLayers","control_","panelTools_","ui","Panel","className","collapsedButtonClass","tooltip","addControls","addPanels","removeControls","getImpl","getOL3Layer","aControl","layers","getLayers","name_","plugin","M$plugin$Buffer","M$layer$BufferLayer","M$impl$control$BufferControl"],"mappings":"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","file":"buffer.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = \"<div class=\\\"m-buffer\\\">\\r\\n  <button id=\\\"point\\\" data-geometry-type=\\\"Point\\\" class=\\\"g-cartografia-gps3\\\" title=\\\"{{translations.tooltip_point}}\\\"></button>\\r\\n  <button id=\\\"lineString\\\" data-geometry-type=\\\"LineString\\\" class=\\\"g-cartografia-lineas\\\" title=\\\"{{translations.tooltip_line}}\\\"></button>\\r\\n  <button id=\\\"polygon\\\" data-geometry-type=\\\"Polygon\\\" class=\\\"g-cartografia-poligono\\\" title=\\\"{{translations.tooltip_polygon}}\\\"></button>\\r\\n  <button id=\\\"remove\\\" class=\\\"g-cartografia-papelera\\\" title=\\\"{{translations.tooltip_remove}}\\\"></button>\\r\\n</div>\";","/*!\r\n * vanilla-picker v2.10.1\r\n * https://vanilla-picker.js.org\r\n *\r\n * Copyright 2017-2019 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)\r\n * Released under the ISC license.\r\n */\r\n/* eslint-disable*/\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n  typeof define === 'function' && define.amd ? define(factory) :\r\n  (global.Picker = factory());\r\n}(this, (function () { 'use strict';\r\n\r\n  var classCallCheck = function (instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n      throw new TypeError(\"Cannot call a class as a function\");\r\n    }\r\n  };\r\n\r\n  var createClass = function () {\r\n    function defineProperties(target, props) {\r\n      for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) descriptor.writable = true;\r\n        Object.defineProperty(target, descriptor.key, descriptor);\r\n      }\r\n    }\r\n\r\n    return function (Constructor, protoProps, staticProps) {\r\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\r\n      if (staticProps) defineProperties(Constructor, staticProps);\r\n      return Constructor;\r\n    };\r\n  }();\r\n\r\n  var slicedToArray = function () {\r\n    function sliceIterator(arr, i) {\r\n      var _arr = [];\r\n      var _n = true;\r\n      var _d = false;\r\n      var _e = undefined;\r\n\r\n      try {\r\n        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\r\n          _arr.push(_s.value);\r\n\r\n          if (i && _arr.length === i) break;\r\n        }\r\n      } catch (err) {\r\n        _d = true;\r\n        _e = err;\r\n      } finally {\r\n        try {\r\n          if (!_n && _i[\"return\"]) _i[\"return\"]();\r\n        } finally {\r\n          if (_d) throw _e;\r\n        }\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n\r\n    return function (arr, i) {\r\n      if (Array.isArray(arr)) {\r\n        return arr;\r\n      } else if (Symbol.iterator in Object(arr)) {\r\n        return sliceIterator(arr, i);\r\n      } else {\r\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\r\n      }\r\n    };\r\n  }();\r\n\r\n  String.prototype.startsWith = String.prototype.startsWith || function (needle) {\r\n      return this.indexOf(needle) === 0;\r\n  };\r\n  String.prototype.padStart = String.prototype.padStart || function (len, pad) {\r\n      var str = this;while (str.length < len) {\r\n          str = pad + str;\r\n      }return str;\r\n  };\r\n\r\n  var colorNames = { cb: '0f8ff', tqw: 'aebd7', q: '-ffff', qmrn: '7fffd4', zr: '0ffff', bg: '5f5dc', bsq: 'e4c4', bck: '---', nch: 'ebcd', b: '--ff', bvt: '8a2be2', brwn: 'a52a2a', brw: 'deb887', ctb: '5f9ea0', hrt: '7fff-', chcT: 'd2691e', cr: '7f50', rnw: '6495ed', crns: '8dc', crms: 'dc143c', cn: '-ffff', Db: '--8b', Dcn: '-8b8b', Dgnr: 'b8860b', Dgr: 'a9a9a9', Dgrn: '-64-', Dkhk: 'bdb76b', Dmgn: '8b-8b', Dvgr: '556b2f', Drng: '8c-', Drch: '9932cc', Dr: '8b--', Dsmn: 'e9967a', Dsgr: '8fbc8f', DsTb: '483d8b', DsTg: '2f4f4f', Dtrq: '-ced1', Dvt: '94-d3', ppnk: '1493', pskb: '-bfff', mgr: '696969', grb: '1e90ff', rbrc: 'b22222', rwht: 'af0', stg: '228b22', chs: '-ff', gnsb: 'dcdcdc', st: '8f8ff', g: 'd7-', gnr: 'daa520', gr: '808080', grn: '-8-0', grnw: 'adff2f', hnw: '0fff0', htpn: '69b4', nnr: 'cd5c5c', ng: '4b-82', vr: '0', khk: '0e68c', vnr: 'e6e6fa', nrb: '0f5', wngr: '7cfc-', mnch: 'acd', Lb: 'add8e6', Lcr: '08080', Lcn: 'e0ffff', Lgnr: 'afad2', Lgr: 'd3d3d3', Lgrn: '90ee90', Lpnk: 'b6c1', Lsmn: 'a07a', Lsgr: '20b2aa', Lskb: '87cefa', LsTg: '778899', Lstb: 'b0c4de', Lw: 'e0', m: '-ff-', mgrn: '32cd32', nn: 'af0e6', mgnt: '-ff', mrn: '8--0', mqm: '66cdaa', mmb: '--cd', mmrc: 'ba55d3', mmpr: '9370db', msg: '3cb371', mmsT: '7b68ee', '': '-fa9a', mtr: '48d1cc', mmvt: 'c71585', mnLb: '191970', ntc: '5fffa', mstr: 'e4e1', mccs: 'e4b5', vjw: 'dead', nv: '--80', c: 'df5e6', v: '808-0', vrb: '6b8e23', rng: 'a5-', rngr: '45-', rch: 'da70d6', pgnr: 'eee8aa', pgrn: '98fb98', ptrq: 'afeeee', pvtr: 'db7093', ppwh: 'efd5', pchp: 'dab9', pr: 'cd853f', pnk: 'c0cb', pm: 'dda0dd', pwrb: 'b0e0e6', prp: '8-080', cc: '663399', r: '--', sbr: 'bc8f8f', rb: '4169e1', sbrw: '8b4513', smn: 'a8072', nbr: '4a460', sgrn: '2e8b57', ssh: '5ee', snn: 'a0522d', svr: 'c0c0c0', skb: '87ceeb', sTb: '6a5acd', sTgr: '708090', snw: 'afa', n: '-ff7f', stb: '4682b4', tn: 'd2b48c', t: '-8080', thst: 'd8bfd8', tmT: '6347', trqs: '40e0d0', vt: 'ee82ee', whT: '5deb3', wht: '', hts: '5f5f5', w: '-', wgrn: '9acd32' };\r\n\r\n  function printNum(num) {\r\n      var decs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\r\n\r\n      var str = decs > 0 ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '') : num.toString();\r\n      return str || '0';\r\n  }\r\n\r\n  var Color = function () {\r\n      function Color(r, g, b, a) {\r\n          classCallCheck(this, Color);\r\n\r\n\r\n          var that = this;\r\n          function parseString(input) {\r\n\r\n              if (input.startsWith('hsl')) {\r\n                  var _input$match$map = input.match(/([\\-\\d\\.e]+)/g).map(Number),\r\n                      _input$match$map2 = slicedToArray(_input$match$map, 4),\r\n                      h = _input$match$map2[0],\r\n                      s = _input$match$map2[1],\r\n                      l = _input$match$map2[2],\r\n                      _a = _input$match$map2[3];\r\n\r\n                  if (_a === undefined) {\r\n                      _a = 1;\r\n                  }\r\n\r\n                  h /= 360;\r\n                  s /= 100;\r\n                  l /= 100;\r\n                  that.hsla = [h, s, l, _a];\r\n              } else if (input.startsWith('rgb')) {\r\n                  var _input$match$map3 = input.match(/([\\-\\d\\.e]+)/g).map(Number),\r\n                      _input$match$map4 = slicedToArray(_input$match$map3, 4),\r\n                      _r = _input$match$map4[0],\r\n                      _g = _input$match$map4[1],\r\n                      _b = _input$match$map4[2],\r\n                      _a2 = _input$match$map4[3];\r\n\r\n                  if (_a2 === undefined) {\r\n                      _a2 = 1;\r\n                  }\r\n\r\n                  that.rgba = [_r, _g, _b, _a2];\r\n              } else {\r\n                  if (input.startsWith('#')) {\r\n                      that.rgba = Color.hexToRgb(input);\r\n                  } else {\r\n                      that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\r\n                  }\r\n              }\r\n          }\r\n\r\n          if (r === undefined) ; else if (Array.isArray(r)) {\r\n              this.rgba = r;\r\n          } else if (b === undefined) {\r\n              var color = r && '' + r;\r\n              if (color) {\r\n                  parseString(color.toLowerCase());\r\n              }\r\n          } else {\r\n              this.rgba = [r, g, b, a === undefined ? 1 : a];\r\n          }\r\n      }\r\n\r\n      createClass(Color, [{\r\n          key: 'printRGB',\r\n          value: function printRGB(alpha) {\r\n              var rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\r\n                  vals = rgb.map(function (x, i) {\r\n                  return printNum(x, i === 3 ? 3 : 0);\r\n              });\r\n\r\n              return alpha ? 'rgba(' + vals + ')' : 'rgb(' + vals + ')';\r\n          }\r\n      }, {\r\n          key: 'printHSL',\r\n          value: function printHSL(alpha) {\r\n              var mults = [360, 100, 100, 1],\r\n                  suff = ['', '%', '%', ''];\r\n\r\n              var hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\r\n                  vals = hsl.map(function (x, i) {\r\n                  return printNum(x * mults[i], i === 3 ? 3 : 1) + suff[i];\r\n              });\r\n\r\n              return alpha ? 'hsla(' + vals + ')' : 'hsl(' + vals + ')';\r\n          }\r\n      }, {\r\n          key: 'printHex',\r\n          value: function printHex(alpha) {\r\n              var hex = this.hex;\r\n              return alpha ? hex : hex.substring(0, 7);\r\n          }\r\n      }, {\r\n          key: 'rgba',\r\n          get: function get$$1() {\r\n              if (this._rgba) {\r\n                  return this._rgba;\r\n              }\r\n              if (!this._hsla) {\r\n                  throw new Error('No color is set');\r\n              }\r\n\r\n              return this._rgba = Color.hslToRgb(this._hsla);\r\n          },\r\n          set: function set$$1(rgb) {\r\n              if (rgb.length === 3) {\r\n                  rgb[3] = 1;\r\n              }\r\n\r\n              this._rgba = rgb;\r\n              this._hsla = null;\r\n          }\r\n      }, {\r\n          key: 'rgbString',\r\n          get: function get$$1() {\r\n              return this.printRGB();\r\n          }\r\n      }, {\r\n          key: 'rgbaString',\r\n          get: function get$$1() {\r\n              return this.printRGB(true);\r\n          }\r\n      }, {\r\n          key: 'hsla',\r\n          get: function get$$1() {\r\n              if (this._hsla) {\r\n                  return this._hsla;\r\n              }\r\n              if (!this._rgba) {\r\n                  throw new Error('No color is set');\r\n              }\r\n\r\n              return this._hsla = Color.rgbToHsl(this._rgba);\r\n          },\r\n          set: function set$$1(hsl) {\r\n              if (hsl.length === 3) {\r\n                  hsl[3] = 1;\r\n              }\r\n\r\n              this._hsla = hsl;\r\n              this._rgba = null;\r\n          }\r\n      }, {\r\n          key: 'hslString',\r\n          get: function get$$1() {\r\n              return this.printHSL();\r\n          }\r\n      }, {\r\n          key: 'hslaString',\r\n          get: function get$$1() {\r\n              return this.printHSL(true);\r\n          }\r\n      }, {\r\n          key: 'hex',\r\n          get: function get$$1() {\r\n              var rgb = this.rgba,\r\n                  hex = rgb.map(function (x, i) {\r\n                  return i < 3 ? x.toString(16) : Math.round(x * 255).toString(16);\r\n              });\r\n\r\n              return '#' + hex.map(function (x) {\r\n                  return x.padStart(2, '0');\r\n              }).join('');\r\n          },\r\n          set: function set$$1(hex) {\r\n              this.rgba = Color.hexToRgb(hex);\r\n          }\r\n      }], [{\r\n          key: 'hexToRgb',\r\n          value: function hexToRgb(input) {\r\n\r\n              var hex = (input.startsWith('#') ? input.slice(1) : input).replace(/^(\\w{3})$/, '$1F').replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4').replace(/^(\\w{6})$/, '$1FF');\r\n\r\n              if (!hex.match(/^([0-9a-fA-F]{8})$/)) {\r\n                  throw new Error('Unknown hex color; ' + input);\r\n              }\r\n\r\n              var rgba = hex.match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1).map(function (x) {\r\n                  return parseInt(x, 16);\r\n              });\r\n\r\n              rgba[3] = rgba[3] / 255;\r\n              return rgba;\r\n          }\r\n      }, {\r\n          key: 'nameToRgb',\r\n          value: function nameToRgb(input) {\r\n\r\n              var hash = input.toLowerCase().replace('at', 'T').replace(/[aeiouyldf]/g, '').replace('ght', 'L').replace('rk', 'D').slice(-5, 4),\r\n                  hex = colorNames[hash];\r\n              return hex === undefined ? hex : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\r\n          }\r\n      }, {\r\n          key: 'rgbToHsl',\r\n          value: function rgbToHsl(_ref) {\r\n              var _ref2 = slicedToArray(_ref, 4),\r\n                  r = _ref2[0],\r\n                  g = _ref2[1],\r\n                  b = _ref2[2],\r\n                  a = _ref2[3];\r\n\r\n              r /= 255;\r\n              g /= 255;\r\n              b /= 255;\r\n\r\n              var max = Math.max(r, g, b),\r\n                  min = Math.min(r, g, b);\r\n              var h = void 0,\r\n                  s = void 0,\r\n                  l = (max + min) / 2;\r\n\r\n              if (max === min) {\r\n                  h = s = 0;\r\n              } else {\r\n                  var d = max - min;\r\n                  s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n                  switch (max) {\r\n                      case r:\r\n                          h = (g - b) / d + (g < b ? 6 : 0);break;\r\n                      case g:\r\n                          h = (b - r) / d + 2;break;\r\n                      case b:\r\n                          h = (r - g) / d + 4;break;\r\n                  }\r\n\r\n                  h /= 6;\r\n              }\r\n\r\n              return [h, s, l, a];\r\n          }\r\n      }, {\r\n          key: 'hslToRgb',\r\n          value: function hslToRgb(_ref3) {\r\n              var _ref4 = slicedToArray(_ref3, 4),\r\n                  h = _ref4[0],\r\n                  s = _ref4[1],\r\n                  l = _ref4[2],\r\n                  a = _ref4[3];\r\n\r\n              var r = void 0,\r\n                  g = void 0,\r\n                  b = void 0;\r\n\r\n              if (s === 0) {\r\n                  r = g = b = l;\r\n              } else {\r\n                  var hue2rgb = function hue2rgb(p, q, t) {\r\n                      if (t < 0) t += 1;\r\n                      if (t > 1) t -= 1;\r\n                      if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n                      if (t < 1 / 2) return q;\r\n                      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n                      return p;\r\n                  };\r\n\r\n                  var q = l < 0.5 ? l * (1 + s) : l + s - l * s,\r\n                      p = 2 * l - q;\r\n\r\n                  r = hue2rgb(p, q, h + 1 / 3);\r\n                  g = hue2rgb(p, q, h);\r\n                  b = hue2rgb(p, q, h - 1 / 3);\r\n              }\r\n\r\n              var rgba = [r * 255, g * 255, b * 255].map(Math.round);\r\n              rgba[3] = a;\r\n\r\n              return rgba;\r\n          }\r\n      }]);\r\n      return Color;\r\n  }();\r\n\r\n  var EventBucket = function () {\r\n      function EventBucket() {\r\n          classCallCheck(this, EventBucket);\r\n\r\n          this._events = [];\r\n      }\r\n\r\n      createClass(EventBucket, [{\r\n          key: 'add',\r\n          value: function add(target, type, handler) {\r\n              target.addEventListener(type, handler, false);\r\n              this._events.push({\r\n                  target: target,\r\n                  type: type,\r\n                  handler: handler\r\n              });\r\n          }\r\n      }, {\r\n          key: 'remove',\r\n          value: function remove(target, type, handler) {\r\n              this._events = this._events.filter(function (e) {\r\n                  var isMatch = true;\r\n                  if (target && target !== e.target) {\r\n                      isMatch = false;\r\n                  }\r\n                  if (type && type !== e.type) {\r\n                      isMatch = false;\r\n                  }\r\n                  if (handler && handler !== e.handler) {\r\n                      isMatch = false;\r\n                  }\r\n\r\n                  if (isMatch) {\r\n                      EventBucket._doRemove(e.target, e.type, e.handler);\r\n                  }\r\n                  return !isMatch;\r\n              });\r\n          }\r\n      }, {\r\n          key: 'destroy',\r\n          value: function destroy() {\r\n              this._events.forEach(function (e) {\r\n                  return EventBucket._doRemove(e.target, e.type, e.handler);\r\n              });\r\n              this._events = [];\r\n          }\r\n      }], [{\r\n          key: '_doRemove',\r\n          value: function _doRemove(target, type, handler) {\r\n              target.removeEventListener(type, handler, false);\r\n          }\r\n      }]);\r\n      return EventBucket;\r\n  }();\r\n\r\n  function parseHTML(htmlString) {\r\n\r\n      var div = document.createElement('div');\r\n      div.innerHTML = htmlString;\r\n      return div.firstElementChild;\r\n  }\r\n\r\n  function dragTrack(eventBucket, area, callback) {\r\n      var dragging = false;\r\n\r\n      function clamp(val, min, max) {\r\n          return Math.max(min, Math.min(val, max));\r\n      }\r\n\r\n      function onMove(e, info, starting) {\r\n          if (starting) {\r\n              dragging = true;\r\n          }\r\n          if (!dragging) {\r\n              return;\r\n          }\r\n\r\n          e.preventDefault();\r\n\r\n          var bounds = area.getBoundingClientRect(),\r\n              w = bounds.width,\r\n              h = bounds.height,\r\n              x = info.clientX,\r\n              y = info.clientY;\r\n\r\n          var relX = clamp(x - bounds.left, 0, w),\r\n              relY = clamp(y - bounds.top, 0, h);\r\n\r\n          callback(relX / w, relY / h);\r\n      }\r\n\r\n      function onMouse(e, starting) {\r\n          var button = e.buttons === undefined ? e.which : e.buttons;\r\n          if (button === 1) {\r\n              onMove(e, e, starting);\r\n          } else {\r\n              dragging = false;\r\n          }\r\n      }\r\n\r\n      function onTouch(e, starting) {\r\n          if (e.touches.length === 1) {\r\n              onMove(e, e.touches[0], starting);\r\n          } else {\r\n              dragging = false;\r\n          }\r\n      }\r\n\r\n      eventBucket.add(area, 'mousedown', function (e) {\r\n          onMouse(e, true);\r\n      });\r\n      eventBucket.add(area, 'touchstart', function (e) {\r\n          onTouch(e, true);\r\n      });\r\n      eventBucket.add(window, 'mousemove', onMouse);\r\n      eventBucket.add(area, 'touchmove', onTouch);\r\n      eventBucket.add(window, 'mouseup', function (e) {\r\n          dragging = false;\r\n      });\r\n      eventBucket.add(area, 'touchend', function (e) {\r\n          dragging = false;\r\n      });\r\n      eventBucket.add(area, 'touchcancel', function (e) {\r\n          dragging = false;\r\n      });\r\n  }\r\n\r\n  var BG_TRANSP = 'url(\"data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'2\\' height=\\'2\\'%3E%3Cpath d=\\'M1,0H0V1H2V2H1\\' fill=\\'lightgrey\\'/%3E%3C/svg%3E\")';\r\n  var HUES = 360;\r\n\r\n  var EVENT_KEY = 'keydown',\r\n      EVENT_CLICK_OUTSIDE = 'mousedown',\r\n      EVENT_TAB_MOVE = 'focusin';\r\n\r\n  function $(selector, context) {\r\n      return (context || document).querySelector(selector);\r\n  }\r\n\r\n  function stopEvent(e) {\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n  }\r\n  function onKey(bucket, target, keys, handler, stop) {\r\n      bucket.add(target, EVENT_KEY, function (e) {\r\n          if (keys.indexOf(e.key) >= 0) {\r\n              if (stop) {\r\n                  stopEvent(e);\r\n              }\r\n              handler(e);\r\n          }\r\n      });\r\n  }\r\n\r\n  var _style = document.createElement('style');\r\n  _style.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:\\'\\';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:\\'\\';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:-webkit-linear-gradient(bottom, gainsboro, transparent);background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:-webkit-linear-gradient(bottom, transparent, gainsboro);background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:-webkit-linear-gradient(left, red, yellow, lime, cyan, blue, magenta, red);background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:-webkit-linear-gradient(top, white, rgba(255,255,255,0) 50%),-webkit-linear-gradient(bottom, black, rgba(0,0,0,0) 50%),-webkit-linear-gradient(left, gray, rgba(128,128,128,0));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'2\\' height=\\'2\\'%3E%3Cpath d=\\'M1,0H0V1H2V2H1\\' fill=\\'lightgrey\\'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:\\'\\';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}';\r\n  document.documentElement.firstElementChild.appendChild(_style);\r\n\r\n  var Picker = function () {\r\n      function Picker(options) {\r\n          classCallCheck(this, Picker);\r\n\r\n\r\n          this.settings = {\r\n\r\n              popup: 'right',\r\n              layout: 'default',\r\n              alpha: true,\r\n              editor: true,\r\n              editorFormat: 'hex',\r\n              cancelButton: false,\r\n              defaultColor: '#0cf'\r\n          };\r\n\r\n          this._events = new EventBucket();\r\n\r\n          this.onChange = null;\r\n\r\n          this.onDone = null;\r\n\r\n          this.onOpen = null;\r\n\r\n          this.onClose = null;\r\n\r\n          this.setOptions(options);\r\n      }\r\n\r\n      createClass(Picker, [{\r\n          key: 'setOptions',\r\n          value: function setOptions(options) {\r\n              var _this = this;\r\n\r\n              if (!options) {\r\n                  return;\r\n              }\r\n              var settings = this.settings;\r\n\r\n              function transfer(source, target, skipKeys) {\r\n                  for (var key in source) {\r\n                      if (skipKeys && skipKeys.indexOf(key) >= 0) {\r\n                          continue;\r\n                      }\r\n\r\n                      target[key] = source[key];\r\n                  }\r\n              }\r\n\r\n              if (options instanceof HTMLElement) {\r\n                  settings.parent = options;\r\n              } else {\r\n\r\n                  if (settings.parent && options.parent && settings.parent !== options.parent) {\r\n                      this._events.remove(settings.parent);\r\n                      this._popupInited = false;\r\n                  }\r\n\r\n                  transfer(options, settings);\r\n\r\n                  if (options.onChange) {\r\n                      this.onChange = options.onChange;\r\n                  }\r\n                  if (options.onDone) {\r\n                      this.onDone = options.onDone;\r\n                  }\r\n                  if (options.onOpen) {\r\n                      this.onOpen = options.onOpen;\r\n                  }\r\n                  if (options.onClose) {\r\n                      this.onClose = options.onClose;\r\n                  }\r\n\r\n                  var col = options.color || options.colour;\r\n                  if (col) {\r\n                      this._setColor(col);\r\n                  }\r\n              }\r\n\r\n              var parent = settings.parent;\r\n              if (parent && settings.popup && !this._popupInited) {\r\n\r\n                  var openProxy = function openProxy(e) {\r\n                      return _this.openHandler(e);\r\n                  };\r\n\r\n                  this._events.add(parent, 'click', openProxy);\r\n\r\n                  onKey(this._events, parent, [' ', 'Spacebar', 'Enter'], openProxy);\r\n\r\n                  this._popupInited = true;\r\n              } else if (options.parent && !settings.popup) {\r\n                  this.show();\r\n              }\r\n          }\r\n      }, {\r\n          key: 'openHandler',\r\n          value: function openHandler(e) {\r\n              if (this.show()) {\r\n\r\n                  e && e.preventDefault();\r\n\r\n                  this.settings.parent.style.pointerEvents = 'none';\r\n\r\n                  var toFocus = e && e.type === EVENT_KEY ? this._domEdit : this.domElement;\r\n                  setTimeout(function () {\r\n                      return toFocus.focus();\r\n                  }, 100);\r\n\r\n                  if (this.onOpen) {\r\n                      this.onOpen(this.colour);\r\n                  }\r\n              }\r\n          }\r\n      }, {\r\n          key: 'closeHandler',\r\n          value: function closeHandler(e) {\r\n              var event = e && e.type;\r\n              var doHide = false;\r\n\r\n              if (!e) {\r\n                  doHide = true;\r\n              } else if (event === EVENT_CLICK_OUTSIDE || event === EVENT_TAB_MOVE) {\r\n\r\n                  var knownTime = (this.__containedEvent || 0) + 100;\r\n                  if (e.timeStamp > knownTime) {\r\n                      doHide = true;\r\n                  }\r\n              } else {\r\n\r\n                  stopEvent(e);\r\n\r\n                  doHide = true;\r\n              }\r\n\r\n              if (doHide && this.hide()) {\r\n                  this.settings.parent.style.pointerEvents = '';\r\n\r\n                  if (event !== EVENT_CLICK_OUTSIDE) {\r\n                      this.settings.parent.focus();\r\n                  }\r\n\r\n                  if (this.onClose) {\r\n                      this.onClose(this.colour);\r\n                  }\r\n              }\r\n          }\r\n      }, {\r\n          key: 'movePopup',\r\n          value: function movePopup(options, open) {\r\n\r\n              this.closeHandler();\r\n\r\n              this.setOptions(options);\r\n              if (open) {\r\n                  this.openHandler();\r\n              }\r\n          }\r\n      }, {\r\n          key: 'setColor',\r\n          value: function setColor(color, silent) {\r\n              this._setColor(color, { silent: silent });\r\n          }\r\n      }, {\r\n          key: '_setColor',\r\n          value: function _setColor(color, flags) {\r\n              if (typeof color === 'string') {\r\n                  color = color.trim();\r\n              }\r\n              if (!color) {\r\n                  return;\r\n              }\r\n\r\n              flags = flags || {};\r\n              var c = void 0;\r\n              try {\r\n\r\n                  c = new Color(color);\r\n              } catch (ex) {\r\n                  if (flags.failSilently) {\r\n                      return;\r\n                  }\r\n                  throw ex;\r\n              }\r\n\r\n              if (!this.settings.alpha) {\r\n                  var hsla = c.hsla;\r\n                  hsla[3] = 1;\r\n                  c.hsla = hsla;\r\n              }\r\n              this.colour = this.color = c;\r\n              this._setHSLA(null, null, null, null, flags);\r\n          }\r\n      }, {\r\n          key: 'setColour',\r\n          value: function setColour(colour, silent) {\r\n              this.setColor(colour, silent);\r\n          }\r\n      }, {\r\n          key: 'show',\r\n          value: function show() {\r\n              var parent = this.settings.parent;\r\n              if (!parent) {\r\n                  return false;\r\n              }\r\n\r\n              if (this.domElement) {\r\n                  var toggled = this._toggleDOM(true);\r\n\r\n                  this._setPosition();\r\n\r\n                  return toggled;\r\n              }\r\n\r\n              var html = this.settings.template || '<div class=\"picker_wrapper\" tabindex=\"-1\"><div class=\"picker_arrow\"></div><div class=\"picker_hue picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_sl\"><div class=\"picker_selector\"></div></div><div class=\"picker_alpha picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_editor\"><input aria-label=\"Type a color name or hex value\"/></div><div class=\"picker_sample\"></div><div class=\"picker_done\"><button>Ok</button></div><div class=\"picker_cancel\"><button>Cancel</button></div></div>';\r\n              var wrapper = parseHTML(html);\r\n\r\n              this.domElement = wrapper;\r\n              this._domH = $('.picker_hue', wrapper);\r\n              this._domSL = $('.picker_sl', wrapper);\r\n              this._domA = $('.picker_alpha', wrapper);\r\n              this._domEdit = $('.picker_editor input', wrapper);\r\n              this._domSample = $('.picker_sample', wrapper);\r\n              this._domOkay = $('.picker_done button', wrapper);\r\n              this._domCancel = $('.picker_cancel button', wrapper);\r\n\r\n              wrapper.classList.add('layout_' + this.settings.layout);\r\n              if (!this.settings.alpha) {\r\n                  wrapper.classList.add('no_alpha');\r\n              }\r\n              if (!this.settings.editor) {\r\n                  wrapper.classList.add('no_editor');\r\n              }\r\n              if (!this.settings.cancelButton) {\r\n                  wrapper.classList.add('no_cancel');\r\n              }\r\n              this._ifPopup(function () {\r\n                  return wrapper.classList.add('popup');\r\n              });\r\n\r\n              this._setPosition();\r\n\r\n              if (this.colour) {\r\n                  this._updateUI();\r\n              } else {\r\n                  this._setColor(this.settings.defaultColor);\r\n              }\r\n              this._bindEvents();\r\n\r\n              return true;\r\n          }\r\n      }, {\r\n          key: 'hide',\r\n          value: function hide() {\r\n              return this._toggleDOM(false);\r\n          }\r\n      }, {\r\n          key: 'destroy',\r\n          value: function destroy() {\r\n              this._events.destroy();\r\n              if (this.domElement) {\r\n                  this.settings.parent.removeChild(this.domElement);\r\n              }\r\n          }\r\n      }, {\r\n          key: '_bindEvents',\r\n          value: function _bindEvents() {\r\n              var _this2 = this;\r\n\r\n              var that = this,\r\n                  dom = this.domElement,\r\n                  events = this._events;\r\n\r\n              function addEvent(target, type, handler) {\r\n                  events.add(target, type, handler);\r\n              }\r\n\r\n              addEvent(dom, 'click', function (e) {\r\n                  return e.preventDefault();\r\n              });\r\n\r\n              dragTrack(events, this._domH, function (x, y) {\r\n                  return that._setHSLA(x);\r\n              });\r\n\r\n              dragTrack(events, this._domSL, function (x, y) {\r\n                  return that._setHSLA(null, x, 1 - y);\r\n              });\r\n\r\n              if (this.settings.alpha) {\r\n                  dragTrack(events, this._domA, function (x, y) {\r\n                      return that._setHSLA(null, null, null, 1 - y);\r\n                  });\r\n              }\r\n\r\n              var editInput = this._domEdit;\r\n              {\r\n                  addEvent(editInput, 'input', function (e) {\r\n                      that._setColor(this.value, { fromEditor: true, failSilently: true });\r\n                  });\r\n\r\n                  addEvent(editInput, 'focus', function (e) {\r\n                      var input = this;\r\n\r\n                      if (input.selectionStart === input.selectionEnd) {\r\n                          input.select();\r\n                      }\r\n                  });\r\n              }\r\n\r\n              this._ifPopup(function () {\r\n\r\n                  var popupCloseProxy = function popupCloseProxy(e) {\r\n                      return _this2.closeHandler(e);\r\n                  };\r\n\r\n                  addEvent(window, EVENT_CLICK_OUTSIDE, popupCloseProxy);\r\n                  addEvent(window, EVENT_TAB_MOVE, popupCloseProxy);\r\n                  onKey(events, dom, ['Esc', 'Escape'], popupCloseProxy);\r\n\r\n                  var timeKeeper = function timeKeeper(e) {\r\n                      _this2.__containedEvent = e.timeStamp;\r\n                  };\r\n                  addEvent(dom, EVENT_CLICK_OUTSIDE, timeKeeper);\r\n\r\n                  addEvent(dom, EVENT_TAB_MOVE, timeKeeper);\r\n\r\n                  addEvent(_this2._domCancel, 'click', popupCloseProxy);\r\n              });\r\n\r\n              var onDoneProxy = function onDoneProxy(e) {\r\n                  _this2._ifPopup(function () {\r\n                      return _this2.closeHandler(e);\r\n                  });\r\n                  if (_this2.onDone) {\r\n                      _this2.onDone(_this2.colour);\r\n                  }\r\n              };\r\n              addEvent(this._domOkay, 'click', onDoneProxy);\r\n              onKey(events, dom, ['Enter'], onDoneProxy);\r\n          }\r\n      }, {\r\n          key: '_setPosition',\r\n          value: function _setPosition() {\r\n              var parent = this.settings.parent,\r\n                  elm = this.domElement;\r\n\r\n              if (parent !== elm.parentNode) {\r\n                  parent.appendChild(elm);\r\n              }\r\n\r\n              this._ifPopup(function (popup) {\r\n\r\n                  if (getComputedStyle(parent).position === 'static') {\r\n                      parent.style.position = 'relative';\r\n                  }\r\n\r\n                  var cssClass = popup === true ? 'popup_right' : 'popup_' + popup;\r\n\r\n                  ['popup_top', 'popup_bottom', 'popup_left', 'popup_right'].forEach(function (c) {\r\n\r\n                      if (c === cssClass) {\r\n                          elm.classList.add(c);\r\n                      } else {\r\n                          elm.classList.remove(c);\r\n                      }\r\n                  });\r\n\r\n                  elm.classList.add(cssClass);\r\n              });\r\n          }\r\n      }, {\r\n          key: '_setHSLA',\r\n          value: function _setHSLA(h, s, l, a, flags) {\r\n              flags = flags || {};\r\n\r\n              var col = this.colour,\r\n                  hsla = col.hsla;\r\n\r\n              [h, s, l, a].forEach(function (x, i) {\r\n                  if (x || x === 0) {\r\n                      hsla[i] = x;\r\n                  }\r\n              });\r\n              col.hsla = hsla;\r\n\r\n              this._updateUI(flags);\r\n\r\n              if (this.onChange && !flags.silent) {\r\n                  this.onChange(col);\r\n              }\r\n          }\r\n      }, {\r\n          key: '_updateUI',\r\n          value: function _updateUI(flags) {\r\n              if (!this.domElement) {\r\n                  return;\r\n              }\r\n              flags = flags || {};\r\n\r\n              var col = this.colour,\r\n                  hsl = col.hsla,\r\n                  cssHue = 'hsl(' + hsl[0] * HUES + ', 100%, 50%)',\r\n                  cssHSL = col.hslString,\r\n                  cssHSLA = col.hslaString;\r\n\r\n              var uiH = this._domH,\r\n                  uiSL = this._domSL,\r\n                  uiA = this._domA,\r\n                  thumbH = $('.picker_selector', uiH),\r\n                  thumbSL = $('.picker_selector', uiSL),\r\n                  thumbA = $('.picker_selector', uiA);\r\n\r\n              function posX(parent, child, relX) {\r\n                  child.style.left = relX * 100 + '%';\r\n              }\r\n              function posY(parent, child, relY) {\r\n                  child.style.top = relY * 100 + '%';\r\n              }\r\n\r\n              posX(uiH, thumbH, hsl[0]);\r\n\r\n              this._domSL.style.backgroundColor = this._domH.style.color = cssHue;\r\n\r\n              posX(uiSL, thumbSL, hsl[1]);\r\n              posY(uiSL, thumbSL, 1 - hsl[2]);\r\n\r\n              uiSL.style.color = cssHSL;\r\n\r\n              posY(uiA, thumbA, 1 - hsl[3]);\r\n\r\n              var opaque = cssHSL,\r\n                  transp = opaque.replace('hsl', 'hsla').replace(')', ', 0)'),\r\n                  bg = 'linear-gradient(' + [opaque, transp] + ')';\r\n\r\n              this._domA.style.backgroundImage = bg + ', ' + BG_TRANSP;\r\n\r\n              if (!flags.fromEditor) {\r\n                  var format = this.settings.editorFormat,\r\n                      alpha = this.settings.alpha;\r\n\r\n                  var value = void 0;\r\n                  switch (format) {\r\n                      case 'rgb':\r\n                          value = col.printRGB(alpha);break;\r\n                      case 'hsl':\r\n                          value = col.printHSL(alpha);break;\r\n                      default:\r\n                          value = col.printHex(alpha);\r\n                  }\r\n                  this._domEdit.value = value;\r\n              }\r\n\r\n              this._domSample.style.color = cssHSLA;\r\n          }\r\n      }, {\r\n          key: '_ifPopup',\r\n          value: function _ifPopup(actionIf, actionElse) {\r\n              if (this.settings.parent && this.settings.popup) {\r\n                  actionIf && actionIf(this.settings.popup);\r\n              } else {\r\n                  actionElse && actionElse();\r\n              }\r\n          }\r\n      }, {\r\n          key: '_toggleDOM',\r\n          value: function _toggleDOM(toVisible) {\r\n              var dom = this.domElement;\r\n              if (!dom) {\r\n                  return false;\r\n              }\r\n\r\n              var displayStyle = toVisible ? '' : 'none',\r\n                  toggle = dom.style.display !== displayStyle;\r\n\r\n              if (toggle) {\r\n                  dom.style.display = displayStyle;\r\n              }\r\n              return toggle;\r\n          }\r\n      }], [{\r\n          key: 'StyleElement',\r\n          get: function get$$1() {\r\n              return _style;\r\n          }\r\n      }]);\r\n      return Picker;\r\n  }();\r\n\r\n  return Picker;\r\n\r\n})));\r\n","/**\r\n * @module M/impl/control/BufferControl\r\n */\r\nexport default class BufferControl extends M.impl.Control {\r\n  /**\r\n   * This function adds the control to the specified map\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Map} map to add the plugin\r\n   * @param {HTMLElement} html of the plugin\r\n   * @api stable\r\n   */\r\n  addTo(map, html) {\r\n    // obtengo la interaccin por defecto del dblclick para manejarla\r\n    const olMap = map.getMapImpl();\r\n    olMap.getInteractions().forEach((interaction) => {\r\n      if (interaction instanceof ol.interaction.DoubleClickZoom) {\r\n        this.dblClickInteraction_ = interaction;\r\n      }\r\n    });\r\n\r\n    // super addTo - don't delete\r\n    super.addTo(map, html);\r\n  }\r\n\r\n  // Add your own functions\r\n  activateClick(map) {\r\n    // desactivo el zoom al dobleclick\r\n    this.dblClickInteraction_.setActive(false);\r\n\r\n    // aado un listener al evento dblclick\r\n    const olMap = map.getMapImpl();\r\n    olMap.on('dblclick', (evt) => {\r\n      // disparo un custom event con las coordenadas del dobleclick\r\n      const customEvt = new CustomEvent('mapclicked', {\r\n        detail: evt.coordinate,\r\n        bubbles: true,\r\n      });\r\n      map.getContainer().dispatchEvent(customEvt);\r\n    });\r\n  }\r\n\r\n  deactivateClick(map) {\r\n    // activo el zoom al dobleclick\r\n    this.dblClickInteraction_.setActive(true);\r\n\r\n    // elimino el listener del evento\r\n    map.getMapImpl().removeEventListener('dblclick');\r\n  }\r\n\r\n  /**\r\n   * This function checks if an interaction is\r\n   * an instance of Draw or Modify\r\n   */\r\n  isInteractionInstanceOfDrawOrModify(interaction) {\r\n    if (interaction instanceof ol.interaction.Draw ||\r\n      interaction instanceof ol.interaction.Modify) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * This function creates a new ol.interaction.Draw object\r\n   * @param {*} features\r\n   * @param {*} type\r\n   */\r\n  createNewDrawInteraction(olFeature, type) {\r\n    return new ol.interaction.Draw({\r\n      features: olFeature,\r\n      type,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * This function creates a new ol.interaction.Modify object\r\n   * @param {*} features\r\n   */\r\n  createNewModifyInteraction(olLayer) {\r\n    return new ol.interaction.Modify({\r\n      source: olLayer.getSource(),\r\n      deleteCondition: (event) => {\r\n        return ol.events.condition.shiftKeyOnly(event) &&\r\n          ol.events.condition.singleClick(event);\r\n      },\r\n    });\r\n  }\r\n\r\n  removeInteraction(interaction) {\r\n    if (interaction instanceof ol.interaction.Draw ||\r\n      interaction instanceof ol.interaction.Modify) {\r\n      this.facadeMap_.getMapImpl().removeInteraction(interaction);\r\n    }\r\n  }\r\n\r\n  setStyle(color, olFeature) {\r\n    if (olFeature) {\r\n      olFeature.setStyle(this.createStyle(color));\r\n    }\r\n  }\r\n\r\n  createStyle(color) {\r\n    return new ol.style.Style({\r\n      fill: new ol.style.Fill({ color: color.replace(')', ', 0.2)') }),\r\n      stroke: new ol.style.Stroke({ color, width: 3 }),\r\n      image: new ol.style.Circle({\r\n        radius: 7,\r\n        fill: new ol.style.Fill({ color }),\r\n      }),\r\n    });\r\n  }\r\n}\r\n","import en from './en';\r\nimport es from './es';\r\n\r\n/**\r\n * Default object with es and en translate.\r\n *\r\n * @const\r\n * @type {object}\r\n */\r\nconst translations = {\r\n  en,\r\n  es,\r\n};\r\n\r\nconst getLang = () => {\r\n  let res = 'es';\r\n  if (typeof M.language.getLang === 'function') {\r\n    res = M.language.getLang();\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\n/**\r\n * This function sets a new language translate.\r\n * @param {string} lang\r\n * @param {JSON} json\r\n * @public\r\n * @api\r\n */\r\nexport const addTranslation = (lang, json) => {\r\n  translations[lang] = json;\r\n};\r\n\r\n/**\r\n * This function gets a language translate.\r\n *\r\n * @param {string} lang\r\n * @return {JSON}\r\n * @public\r\n * @api\r\n */\r\nexport const getTranslation = (lang) => {\r\n  return translations[lang];\r\n};\r\n\r\n/**\r\n * This function gets a language value from key\r\n *\r\n * @public\r\n * @param {string}\r\n * @param {string}\r\n * @return {string}\r\n * @public\r\n * @api\r\n */\r\n\r\nexport const getValue = (keyPath, lang = getLang()) => {\r\n  const translation = getTranslation(lang);\r\n  let value = '';\r\n  if (M.utils.isNullOrEmpty(translation)) {\r\n    /* eslint-disable no-console */\r\n    console.warn(`The translation '${lang}' has not been defined.`);\r\n  } else {\r\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\r\n  }\r\n\r\n  return value;\r\n};\r\n","import template from 'templates/buffer';\r\nimport BufferControlImpl from 'impl/buffercontrolImpl';\r\nimport Picker from './vanilla-picker';\r\nimport { getValue } from './i18n/language';\r\n\r\nexport default class BufferControl extends M.Control {\r\n  /**\r\n   * @classdesc\r\n   * Main constructor of the class. Creates a influenceareaControl\r\n   * control\r\n   *\r\n   * @constructor\r\n   * @extends {M.Control}\r\n   * @api stable\r\n   */\r\n  constructor(editLayer, featuresEdit) {\r\n    const impl = new BufferControlImpl();\r\n    super(impl, 'buffer');\r\n    this.impl = impl;\r\n    this.editLayer = editLayer;\r\n\r\n    this.featuresEdit = featuresEdit;\r\n\r\n    // 1. checks if the implementation can create influenceareaControl\r\n    if (M.utils.isUndefined(BufferControlImpl)) {\r\n      M.exception(getValue('exception_control'));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This function creates the view\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Map} map to add the control\r\n   * @api stable\r\n   */\r\n  createView(map) {\r\n    this.facadeMap_ = map;\r\n    return new Promise((success, fail) => {\r\n      const html = M.template.compileSync(template, {\r\n        vars: {\r\n          translations: {\r\n            tooltip_point: getValue('tooltip_point'),\r\n            tooltip_line: getValue('tooltip_line'),\r\n            tooltip_polygon: getValue('tooltip_polygon'),\r\n            tooltip_remove: getValue('tooltip_remove'),\r\n          },\r\n        },\r\n      });\r\n      this.template_ = html;\r\n      this.template_.querySelector('#point').addEventListener('click', e => this.manageDraw_(e));\r\n      this.template_.querySelector('#polygon').addEventListener('click', e => this.manageDraw_(e));\r\n      this.template_.querySelector('#lineString').addEventListener('click', e => this.manageDraw_(e));\r\n      this.template_.querySelector('#remove').addEventListener('click', e => this.removeFeatures(e));\r\n      success(html);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add or remove interaction to draw in map\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   * @export\r\n   */\r\n  manageDraw_(evt) {\r\n    let isTheSame = false;\r\n    const value = evt.target.getAttribute('data-geometry-type');\r\n    isTheSame = this.manageActivatedDeactivated(evt.target);\r\n    evt.target.classList.add('activated');\r\n    this.manageInteraction_(false, null, null);\r\n    if (!isTheSame) {\r\n      const draw = this.impl.createNewDrawInteraction(this.featuresEdit, (value));\r\n      const originDraw = this.impl.createNewDrawInteraction(this.featuresEdit, (value));\r\n      let colorFeature = 'rgb(48, 169, 146)';\r\n      let originFeature;\r\n      originDraw.on('drawend', (event) => {\r\n        originFeature = event.feature;\r\n      });\r\n      draw.on('drawend', (e) => {\r\n        M.dialog.info(\r\n          `<div id=\"chooseBuffer\">\r\n            <div id=\"colorPick\"></div>\r\n            <input type=\"number\" id=\"metreBuffer\" value=\"50\" style=\"width: 10rem;\">\r\n            <div style=\"padding-top: 0.5rem;text-align: center;\">\r\n              <input type=\"radio\" name=\"unit\" id=\"metro\" value=\"m\" checked=\"checked\"/>\r\n              <label for=\"metro\">${getValue('unit_m')}</label>\r\n              <input type=\"radio\" name=\"unit\" id=\"kilometro\" value=\"km\"/>\r\n              <label for=\"kilometro\">${getValue('unit_km')}</label>\r\n            </div>\r\n          </div>`,\r\n          getValue('title_popup')\r\n        );\r\n        const dialog = document.querySelector('.m-dialog > div.m-modal > div.m-content');\r\n        dialog.style.minWidth = 'auto';\r\n        const title = document.querySelector('.m-modal .m-title');\r\n        title.style.backgroundColor = 'rgb(48, 169, 146)';\r\n        const colorPickBtn = document.querySelector('div#colorPick');\r\n        const colorPicker = new Picker({\r\n          parent: colorPickBtn,\r\n          popup: 'bottom',\r\n          alpha: false,\r\n          color: 'rgb(48, 169, 146)',\r\n          editor: false,\r\n          onChange: (color) => {\r\n            colorPickBtn.style.background = color.rgbaString;\r\n            colorFeature = color.rgbString;\r\n          },\r\n        });\r\n        colorPickBtn.addEventListener('click', () => {\r\n          colorPicker.show();\r\n        });\r\n        const btn = document.querySelector('.m-button button');\r\n        const inputBuffer = document.querySelector('div.m-modal input#metreBuffer');\r\n        let distance = 50;\r\n        inputBuffer.addEventListener('keyup', () => {\r\n          distance = inputBuffer.value;\r\n          btn.style.pointerEvents = document.querySelector('div.m-modal input#metreBuffer:invalid') === null ? 'initial' : 'none';\r\n        });\r\n        inputBuffer.addEventListener('keydown', () => {\r\n          btn.style.pointerEvents = document.querySelector('div.m-modal input#metreBuffer:invalid') === null ? 'initial' : 'none';\r\n        });\r\n        let unit = 1;\r\n        const unitBufferM = document.querySelector('div.m-modal input#metro');\r\n        const unitBufferKm = document.querySelector('div.m-modal input#kilometro');\r\n        unitBufferM.addEventListener('change', () => { unit = 1; });\r\n        unitBufferKm.addEventListener('change', () => { unit = 1000; });\r\n        btn.style.backgroundColor = 'rgb(48, 169, 146)';\r\n        btn.addEventListener('click', (ev) => {\r\n          this.impl.setStyle(colorFeature, originFeature);\r\n          this.impl.setStyle(colorFeature, e.feature);\r\n          this.manageInteraction_(false, null, null);\r\n          this.addBuffer_(e.feature, (distance * unit), evt.target);\r\n        });\r\n      });\r\n      this.facadeMap_.getMapImpl().addInteraction(draw);\r\n      this.facadeMap_.getMapImpl().addInteraction(originDraw);\r\n    }\r\n    isTheSame = false;\r\n  }\r\n\r\n  manageInteraction_(add, featuresEdit, value) {\r\n    const evt = window.event;\r\n    if (!add) {\r\n      const arrayInteractions = [].concat(this.facadeMap_.getMapImpl()\r\n        .getInteractions().getArray());\r\n      arrayInteractions.forEach((interaction) => {\r\n        if (this.impl.isInteractionInstanceOfDrawOrModify(interaction)) {\r\n          this.facadeMap_.getMapImpl().removeInteraction(interaction);\r\n        }\r\n      });\r\n    } else {\r\n      const draw = this.impl.createNewDrawInteraction(this.featuresEdit, (value));\r\n      draw.on('drawend', (e) => {\r\n        const arrayInteractions = [].concat(this.facadeMap_.getMapImpl()\r\n          .getInteractions().getArray());\r\n        arrayInteractions.forEach((interaction) => {\r\n          if (this.impl.isInteractionInstanceOfDrawOrModify(interaction)) {\r\n            this.facadeMap_.getMapImpl().removeInteraction(interaction);\r\n          }\r\n        });\r\n        const inputBuffer = document.querySelector('input#metreBuffer');\r\n        if (inputBuffer) {\r\n          const distance = inputBuffer.value;\r\n          this.addBuffer_(e.feature, distance, evt.target);\r\n        }\r\n      });\r\n      this.facadeMap_.getMapImpl().addInteraction(draw);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Get feature and create buffer\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   * @export\r\n   */\r\n  addBuffer_(feature, distance, target) {\r\n    const parser = new jsts.io.OL3Parser();\r\n    const jstsGeom = parser.read(feature.getGeometry());\r\n    const buffered = jstsGeom.buffer(parseInt(distance, 10));\r\n    feature.setGeometry(parser.write(buffered));\r\n    this.manageActivatedDeactivated(target);\r\n  }\r\n\r\n\r\n  /**\r\n   * Manage which features has to activated or deactivated\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   * @export\r\n   */\r\n  manageActivatedDeactivated(target) {\r\n    let flag = false;\r\n    const elements = document.querySelectorAll('div.m-buffer button.activated');\r\n    if (elements && elements != null && elements.length && elements.length > 0) {\r\n      for (let i = 0; i < elements.length; i += 1) {\r\n        const elementAux = elements[0];\r\n        elementAux.classList.remove('activated');\r\n        flag = true;\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n\r\n  /**\r\n   * Remove all features and deactivated all tools\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   * @export\r\n   */\r\n  removeFeatures() {\r\n    this.editLayer.getSource().clear();\r\n    const elements = document.querySelectorAll('div.m-buffer button.activated');\r\n    if (elements && elements != null && elements.length) {\r\n      for (let i = 0; i < elements.length; i += 1) {\r\n        const elementAux = elements[0];\r\n        elementAux.classList.remove('activated');\r\n      }\r\n    }\r\n    this.manageInteraction_(false, null, null);\r\n  }\r\n\r\n  /**\r\n   * This function compares controls\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Control} control to compare\r\n   * @api stable\r\n   */\r\n  equals(control) {\r\n    return control instanceof BufferControl;\r\n  }\r\n}\r\n","export default class BufferLayerImpl extends M.impl.Layer {\r\n  /**\r\n   * @classdesc\r\n   * Main constructor of the class. Creates a KML layer\r\n   * with parameters specified by the user\r\n   *\r\n   * @constructor\r\n   * @implements {M.impl.Layer}\r\n   * @param {Mx.parameters.LayerOptions} options custom options for this layer\r\n   * @api stable\r\n   */\r\n  constructor(layerOL) {\r\n    super();\r\n\r\n    this.layerOL = layerOL;\r\n  }\r\n\r\n  /**\r\n   * This function sets the map object of the layer\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.impl.Map} map\r\n   * @api stable\r\n   */\r\n  addTo(map) {\r\n    this.map = map;\r\n    const olMap = this.map.getMapImpl();\r\n    olMap.addLayer(this.layerOL);\r\n  }\r\n\r\n  destroy() {\r\n    const olMap = this.map.getMapImpl();\r\n\r\n    if (!M.utils.isNullOrEmpty(this.layerOL)) {\r\n      olMap.removeLayer(this.layerOL);\r\n      this.layerOL = null;\r\n    }\r\n    this.map = null;\r\n  }\r\n}\r\n","/**\r\n * @module M/layer/BufferLayer\r\n */\r\n\r\nimport BufferLayerImpl from 'impl/bufferLayerImpl';\r\nimport { getValue } from './i18n/language';\r\n\r\nexport default class BufferLayer extends M.Layer {\r\n  /**\r\n   * @classdesc\r\n   * Main constructor of the class. Creates a Draw layer\r\n   * with parameters specified by the user\r\n   *\r\n   * @constructor\r\n   * @extends {M.Layer}\r\n   * @api stable\r\n   */\r\n  constructor(layer) {\r\n    const impl = new BufferLayerImpl(layer);\r\n\r\n    super({}, impl);\r\n\r\n    // checks if the implementation can create KML layers\r\n    if (M.utils.isUndefined(BufferLayerImpl)) {\r\n      M.exception(getValue('exception_layer'));\r\n    }\r\n\r\n    this.layer = layer;\r\n\r\n    this.type = M.layer.type.GeoJSON;\r\n  }\r\n\r\n  /**\r\n   * This function checks if an object is equals\r\n   * to this layer\r\n   *\r\n   * @function\r\n   * @api\r\n   */\r\n  equals(obj) {\r\n    let equals = false;\r\n\r\n    if (obj instanceof BufferLayer) {\r\n      equals = this.name === obj.name;\r\n    }\r\n\r\n    return equals;\r\n  }\r\n}\r\n","/**\r\n * @module M/plugin/Buffer\r\n */\r\n\r\nimport 'assets/css/buffer';\r\nimport BufferControl from './buffercontrol';\r\nimport BufferLayer from './bufferLayer';\r\nimport api from '../../api';\r\nimport { getValue } from './i18n/language';\r\n\r\nexport default class Buffer extends M.Plugin {\r\n  /**\r\n   * @classdesc\r\n   * Main facade plugin object. This class creates a plugin\r\n   * object which has an implementation Object\r\n   *\r\n   * @constructor\r\n   * @extends {M.Plugin}\r\n   * @param {Object} impl implementation object\r\n   * @api stable\r\n   */\r\n  constructor(options = {}) {\r\n    super();\r\n\r\n    /**\r\n     * Facade of the map\r\n     * @private\r\n     * @type {M.Map}\r\n     */\r\n    this.map_ = null;\r\n\r\n    /**\r\n     * Array of controls\r\n     * @private\r\n     * @type {Array<M.Control>}\r\n     */\r\n    this.controls_ = [];\r\n\r\n    /**\r\n     * Position of the Plugin\r\n     * Posible values: TR | TL | BL | BR\r\n     * @type {Enum}\r\n     */\r\n    this.position_ = options.position || 'TL';\r\n\r\n    /**\r\n     * Option to allow the plugin to be collapsed or not\r\n     * @private\r\n     * @type {Boolean}\r\n     */\r\n    this.collapsed_ = options.collapsed;\r\n    if (this.collapsed_ === undefined) this.collapsed_ = true;\r\n\r\n    /**\r\n     * Option to allow the plugin to be collapsible or not\r\n     * @private\r\n     * @type {Boolean}\r\n     */\r\n    this.collapsible_ = options.collapsible;\r\n    if (this.collapsible_ === undefined) this.collapsible_ = true;\r\n\r\n    /**\r\n     * Metadata from api.json\r\n     * @private\r\n     * @type {Object}\r\n     */\r\n    this.metadata_ = api.metadata;\r\n  }\r\n\r\n  /**\r\n   * This function adds this plugin into the map\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Map} map the map to add the plugin\r\n   * @api stable\r\n   */\r\n  addTo(map) {\r\n    this.map_ = map;\r\n    this.featuresEdit = new ol.Collection();\r\n    this.featureOverlay = new ol.layer.Vector({\r\n      source: new ol.source.Vector({ name: 'bufferLayer', features: this.featuresEdit }),\r\n      style: new ol.style.Style({\r\n        fill: new ol.style.Fill({ color: 'rgba(255, 255, 0, 0.2)' }),\r\n        stroke: new ol.style.Stroke({ color: 'rgb(48, 169, 146)', width: 3 }),\r\n        image: new ol.style.Circle({\r\n          radius: 7,\r\n          fill: new ol.style.Fill({ color: 'rgb(48, 169, 146)' }),\r\n        }),\r\n      }),\r\n    });\r\n    this.featureOverlay.setMap(this.map_.getMapImpl());\r\n\r\n    const layerAux = this.hasLayerBuffer_();\r\n    if (layerAux == null) {\r\n      this.bufferLayer = new BufferLayer(this.featureOverlay);\r\n      this.map_.addLayers(this.bufferLayer);\r\n    } else {\r\n      this.bufferLayer = layerAux;\r\n    }\r\n\r\n    this.control_ = new BufferControl(this.featureOverlay, this.featuresEdit);\r\n\r\n    this.panelTools_ = new M.ui.Panel('buffer', {\r\n      collapsed: this.collapsed_,\r\n      collapsible: this.collapsible_,\r\n      className: 'm-buffer',\r\n      collapsedButtonClass: 'g-cartografia-editar',\r\n      position: M.ui.position[this.position_],\r\n      tooltip: getValue('tooltip'),\r\n    });\r\n    this.panelTools_.addControls(this.control_);\r\n    this.map_.addPanels(this.panelTools_);\r\n  }\r\n\r\n  /**\r\n   * This function destroys this plugin\r\n   *\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   */\r\n  destroy() {\r\n    this.map_.removeControls(this.control_);\r\n    if (this.bufferLayer.getImpl().getOL3Layer()) {\r\n      this.bufferLayer.getImpl().getOL3Layer().getSource().clear(true);\r\n    }\r\n    this.control_.removeFeatures();\r\n    this.map_ = null;\r\n    this.control_ = null;\r\n    this.panelTools_ = null;\r\n    this.featuresEdit = null;\r\n    this.featureOverlay = null;\r\n  }\r\n\r\n  /**\r\n   * This function return the control of plugin\r\n   *\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   */\r\n  getControls() {\r\n    const aControl = [];\r\n    aControl.push(this.control_);\r\n    return aControl;\r\n  }\r\n\r\n  /**\r\n   * @getter\r\n   * @public\r\n   */\r\n  get name() {\r\n    return 'buffer';\r\n  }\r\n\r\n  /**\r\n   * This functions returns the controls of the plugin.\r\n   *\r\n   * @public\r\n   * @return {M.Control}\r\n   * @api\r\n   */\r\n  get control() {\r\n    return this.control_;\r\n  }\r\n\r\n  hasLayerBuffer_() {\r\n    const layers = this.map_.getLayers();\r\n    for (let i = 0; i < layers.length; i += 1) {\r\n      const layerAux = layers[i];\r\n      if (layerAux instanceof BufferLayer) {\r\n        return layerAux;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get the API REST Parameters of the plugin\r\n   *\r\n   * @function\r\n   * @public\r\n   * @api\r\n   */\r\n  getAPIRest() {\r\n    return `${this.name_}=${this.position_}*${this.collapsed_}*${this.collapsible_}`;\r\n  }\r\n\r\n  /**\r\n   * This function gets metadata plugin\r\n   *\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   */\r\n  getMetadata() {\r\n    return this.metadata_;\r\n  }\r\n}\r\n","import M$plugin$Buffer from './/facade/js/buffer';\nimport M$layer$BufferLayer from './/facade/js/bufferLayer';\nimport M$impl$control$BufferControl from './/impl/ol/js/buffercontrolImpl';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.layer) window.M.layer = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.Buffer = M$plugin$Buffer;\nwindow.M.layer.BufferLayer = M$layer$BufferLayer;\nwindow.M.impl.control.BufferControl = M$impl$control$BufferControl;\n"],"sourceRoot":""}